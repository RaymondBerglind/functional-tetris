!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){const n=document.getElementById("tetris"),o=n.getContext("2d");o.scale(20,20);const r=[null,"#FF0D72","#0DC2FF","#0DFF72","#F538FF","#FF8E0D","#FFE138","#3877FF"],i=function(t,e){const n=[];for(;e--;)n.push(new Array(t).fill(0));return n}(12,20),l={matrix:null,position:{x:0,y:0},score:0};function f(t,e){t.forEach((t,n)=>{t.forEach((t,i)=>{0!==t&&(o.fillStyle=r[t],o.fillRect(i+e.x,n+e.y,1,1))})})}function u(t,e){const[n,o]=[e.matrix,e.position];for(let e=0;e<n.length;++e)for(let r=0;r<n[e].length;++r)if(0!==n[e][r]&&0!==(t[e+o.y]&&t[e+o.y][r+o.x]))return!0;return!1}function c(){l.position.y++,u(i,l)&&(l.position.y--,function(t,e){e.matrix.forEach((n,o)=>{n.forEach((n,r)=>{0!==n&&(t[o+e.position.y][r+e.position.x]=n)})})}(i,l),a(),function(){let t=1;t:for(let e=i.length-1;e>0;--e){for(let t=0;t<i[e].length;++t)if(0===i[e][t])continue t;const n=i.splice(e,1)[0].fill(0);i.unshift(n),++e,l.score+=10*t,t*=2}}(),h()),y=0}function s(t){l.position.x+=t,u(i,l)&&(l.position.x-=t)}function a(){l.matrix=function(t){return"T"===t?[[0,0,0],[1,1,1],[0,1,0]]:"O"===t?[[2,2],[2,2]]:"L"===t?[[0,3,0],[0,3,0],[0,3,3]]:"J"===t?[[0,4,0],[0,4,0],[4,4,0]]:"I"===t?[[0,5,0,0],[0,5,0,0],[0,5,0,0],[0,5,0,0]]:"S"===t?[[0,6,6],[6,6,0],[0,0,0]]:"Z"===t?[[7,7,0],[0,7,7],[0,0,0]]:void 0}("ILJOTSZ"["ILJOTSZ".length*Math.random()|0]),l.position.y=0,l.position.x=(i[0].length/2|0)-(l.matrix[0].length/2|0),u(i,l)&&(i.forEach(t=>t.fill(0)),l.score=0,h())}function d(t){const e=l.position.x;let n=1;for(p(l.matrix,t);u(i,l);)if(l.position.x+=n,(n=-(n+(n>0?1:-1)))>l.matrix[0].length)return p(l.matrix,-t),void(l.position.x=e)}function p(t,e){for(let e=0;e<t.length;++e)for(let n=0;n<e;++n)[t[n][e],t[e][n]]=[t[e][n],t[n][e]];e>0?t.forEach(t=>t.reverse()):t.reverse()}let y=0,x=1e3,m=0;function h(){document.getElementById("score").innerText=l.score}document.addEventListener("keydown",t=>{37===t.keyCode?s(-1):39===t.keyCode?s(1):40===t.keyCode?c():81===t.keyCode?d(-1):87===t.keyCode&&d(1)}),a(),h(),function t(e=0){const r=e-m;m=e,(y+=r)>x&&c(),o.fillStyle="#000",o.fillRect(0,0,n.width,n.height),f(i,{x:0,y:0}),f(l.matrix,l.position),requestAnimationFrame(t)}()}]);